{"version":3,"sources":["Emitter.js","spring-simulator.js","spring.js","utils.js","Component.js","Application.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["var $$ = $$ || {};\r\n\r\n$$.Emitter = class Emitter {\r\n\tconstructor () {\r\n\t\tthis._itemContainer = new $$.Emitter.ItemContainer();\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String} eventId\r\n\t * @return {Boolean}\r\n\t * @private\r\n\t */\r\n\t_isEventIdJustANamespace (eventId) {\r\n\t\teventId = String(eventId);\r\n\r\n\t\treturn !!eventId.match(/^\\.[a-z\\d]+$/i);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String} eventId\r\n\t * @return {Array} [eventName, namespace]\r\n\t * @throws {Error}\r\n\t * @private\r\n\t */\r\n\t_parseAndValidateEventId (eventId) {\r\n\t\teventId = String(eventId);\r\n\r\n\t\t// Either a single event name.\r\n\r\n\t\tvar match = eventId.match(/^[a-z\\d]+$/i);\r\n\r\n\t\tif (match) {\r\n\t\t\treturn [ match[ 0 ], null ];\r\n\t\t}\r\n\r\n\t\t// Or an event name + a namespace name.\r\n\r\n\t\tmatch = eventId.match(/^([a-z\\d]+)\\.([a-z\\d]+)$/i);\r\n\r\n\t\tif (!match) {\r\n\t\t\tthrow Error(\r\n\t\t\t\t'Full event names should not be empty, should consist of letters and numbers'\r\n\t\t\t\t+ ' and may contain only single dot in the middle.'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn [ match[ 1 ], match[ 2 ] ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String} eventId\r\n\t */\r\n\ttrigger (eventId /*, eventData1, eventData2, ... */) {\r\n\t\teventId = String(eventId);\r\n\r\n\t\tvar parts = this._parseAndValidateEventId(eventId);\r\n\t\tvar items = this._itemContainer.getItems(parts[ 0 ], parts[ 1 ]);\r\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\r\n\t\t_.each(items, function (item) {\r\n\t\t\titem.callback.apply(null, args);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String} eventId\r\n\t * @param {Function} callback\r\n\t */\r\n\ton (eventId, callback) {\r\n\t\tif (!callback) {\r\n\t\t\tthrow Error('An event callback should be provided.');\r\n\t\t}\r\n\r\n\t\tif (!_.isFunction(callback)) {\r\n\t\t\tthrow Error('An event callback should be a function.');\r\n\t\t}\r\n\r\n\t\tvar parts = this._parseAndValidateEventId(eventId);\r\n\r\n\t\tthis._itemContainer.add(parts[ 0 ], parts[ 1 ], callback);\r\n\t}\r\n\r\n\toff (eventId) {\r\n\t\tif (!arguments.length) {\r\n\t\t\tthis._itemContainer.clear();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\teventId = String(eventId);\r\n\r\n\t\tif (!this._isEventIdJustANamespace(eventId)) {\r\n\t\t\t// Event name and possible namespace.\r\n\t\t\tvar parts = this._parseAndValidateEventId(eventId);\r\n\t\t\tthis._itemContainer.remove(parts[ 0 ], parts[ 1 ]);\r\n\t\t} else {\r\n\t\t\t// Just a namespace.\r\n\t\t\tthis._itemContainer.remove(null, eventId.substr(1));\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n$$.Emitter.ItemContainer = class EmitterItemContainer {\r\n\tconstructor () {\r\n\t\t/* Items:\r\n\t\t *\r\n\t\t * {\r\n\t\t *   eventName1: {\r\n\t\t *     namespace1: [ { callback, *... }, ... ],\r\n\t\t *     namespace2: [ ... ]\r\n\t\t *     ...\r\n\t\t *   },\r\n\t\t *\r\n\t\t *   eventName2: { ... }\r\n\t\t *   ...\r\n\t\t * }\r\n\t\t */\r\n\t\tthis._items = {};\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String} eventName\r\n\t * @param {String} namespace\r\n\t * @param {Function} callback\r\n\t */\r\n\tadd (eventName, namespace, callback) {\r\n\t\teventName = String(eventName);\r\n\t\tnamespace = !namespace ? '*' : String(namespace);\r\n\r\n\t\tif (!this._items.hasOwnProperty(eventName)) {\r\n\t\t\tthis._items[ eventName ] = {};\r\n\t\t}\r\n\r\n\t\tif (!this._items[ eventName ].hasOwnProperty(namespace)) {\r\n\t\t\tthis._items[ eventName ][ namespace ] = [];\r\n\t\t}\r\n\r\n\t\tthis._items[ eventName ][ namespace ].push({\r\n\t\t\tcallback: callback\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String} eventName\r\n\t * @param {String}|null namespace\r\n\t * @return {Array}\r\n\t */\r\n\tgetItems (eventName, namespace) {\r\n\t\teventName = String(eventName);\r\n\r\n\t\tif (!this._items.hasOwnProperty(eventName)) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tif (!namespace) {\r\n\t\t\t// Return items for all namespaces of the event.\r\n\r\n\t\t\tvar arraysOfItems = _.values(this._items[ eventName ]);\r\n\r\n\t\t\treturn _.union.apply(null, arraysOfItems);\r\n\t\t}\r\n\r\n\t\tnamespace = String(namespace);\r\n\r\n\t\tif (!this._items[ eventName ].hasOwnProperty(namespace)) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\treturn this._items[ eventName ][ namespace ];\r\n\t}\r\n\r\n\t/**\r\n\t * Removes by event name, by namespace or by both.\r\n\t *\r\n\t * @param {String} eventName\r\n\t * @param {String} namespace\r\n\t */\r\n\tremove (eventName, namespace) {\r\n\t\tif (!eventName && !namespace) {\r\n\t\t\tthrow Error('Only one of the arguments can be omitted.');\r\n\t\t}\r\n\r\n\t\tif (!namespace) {\r\n\t\t\tthis.removeByEventName(eventName);\r\n\t\t} else if (!eventName) {\r\n\t\t\tthis.removeByNamespace(namespace);\r\n\t\t} else {\r\n\t\t\t// Both eventName and namespace are not null.\r\n\r\n\t\t\teventName = String(eventName);\r\n\t\t\tnamespace = String(namespace);\r\n\r\n\t\t\tif (!this._items.hasOwnProperty(eventName) || !this._items[ eventName ].hasOwnProperty(namespace)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tdelete this._items[ eventName ][ namespace ];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String} eventName\r\n\t */\r\n\tremoveByEventName (eventName) {\r\n\t\teventName = String(eventName);\r\n\r\n\t\tif (!this._items.hasOwnProperty(eventName)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdelete this._items[ eventName ];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {String} namespace\r\n\t */\r\n\tremoveByNamespace (namespace) {\r\n\t\tnamespace = String(namespace);\r\n\r\n\t\t_.each(this._items, function (itemsByNamespace) {\r\n\t\t\tif (!itemsByNamespace.hasOwnProperty(namespace)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tdelete itemsByNamespace[ namespace ];\r\n\t\t});\r\n\t}\r\n\r\n\tclear () {\r\n\t\tthis._items = {};\r\n\t}\r\n};\r\n","$$.Simulation = $$.Simulation || {};\r\n\r\n/**\r\n * Не нужно использовать этот класс напрямую. Нужно использовать $$.Simulation.Spring.\r\n */\r\n$$.Simulation.SpringSimulator = function() {\r\n\tvar self = this;\r\n\r\n\tthis._springs = [];\r\n\tthis._lastTime = +(new Date());\r\n\r\n\tsetInterval(function() {\r\n\t\tvar now = +(new Date());\r\n\t\tvar time = (now - self._lastTime) / 1000;\r\n\t\tvar dt = 0.01;\r\n\r\n\t\tif (time > 0.2) {\r\n\t\t\t// Если жс работает слишком медленно, замедлить симуляцию.\r\n\t\t\ttime = 0.2;\r\n\t\t}\r\n\r\n\t\tvar i, ni = self._springs.length, spring\r\n\t\t\t, dampings = []\r\n\t\t\t, distance, newDistance, force, newVelocity\r\n\t\t\t, targetVelocityLimit, velocityLimit, positionLimits;\r\n\r\n\t\tfor (i = 0; i < ni; i++) {\r\n\t\t\tspring = self._springs[i];\r\n\t\t\tdampings.push(2 * Math.sqrt(spring._rigidness) * spring._damping);\r\n\t\t}\r\n\r\n\t\twhile (time > 0.000001) {\r\n\t\t\tfor (i = 0; i < ni; i++) {\r\n\t\t\t\tspring = self._springs[i];\r\n\t\t\t\t\r\n\t\t\t\tif (spring._frozen) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdistance = spring._target - spring._position;\r\n\r\n\t\t\t\tforce = (distance >= 0 ? 1 : -1) * Math.pow(Math.abs(distance), spring._forcePower) * spring._rigidness\r\n\t\t\t\t\t- (spring._velocity >= 0 ? 1 : -1) * Math.abs(spring._velocity) * dampings[i];\r\n\r\n\t\t\t\tnewVelocity = spring._velocity + force * dt;\r\n\r\n\t\t\t\tvelocityLimit = spring._velocityLimit;\r\n\t\t\t\ttargetVelocityLimit = spring._targetVelocityLimit;\r\n\r\n\t\t\t\tif (targetVelocityLimit !== null) {\r\n\t\t\t\t\ttargetVelocityLimit *= Math.pow(spring._targetVelocityLimitPower, Math.abs(distance));\r\n\r\n\t\t\t\t\tif (velocityLimit === null || targetVelocityLimit < velocityLimit) {\r\n\t\t\t\t\t\tvelocityLimit = targetVelocityLimit;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (velocityLimit !== null && Math.abs(newVelocity) > velocityLimit) {\r\n\t\t\t\t\tnewVelocity = (newVelocity >= 0 ? 1 : -1) * velocityLimit;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tspring._position += newVelocity * dt;\r\n\t\t\t\tspring._velocity = newVelocity;\r\n\r\n\t\t\t\tif (spring._stopAtTarget) {\r\n\t\t\t\t\tnewDistance = spring._target - spring._position;\r\n\r\n\t\t\t\t\tif (distance > 0 && newDistance <= 0 || distance < 0 && newDistance >= 0) {\r\n\t\t\t\t\t\tspring._position = spring._target;\r\n\t\t\t\t\t\tspring._velocity = 0;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (spring._positionLimits !== null) {\r\n\t\t\t\t\tpositionLimits = spring._positionLimits;\r\n\r\n\t\t\t\t\tif (spring._position < positionLimits[0]) {\r\n\t\t\t\t\t\tspring._position = positionLimits[0];\r\n\t\t\t\t\t\tspring._velocity = 0;\r\n\t\t\t\t\t} else if (spring._position > positionLimits[1]) {\r\n\t\t\t\t\t\tspring._position = positionLimits[1];\r\n\t\t\t\t\t\tspring._velocity = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttime -= dt;\r\n\t\t}\r\n\r\n\t\tself._lastTime = now;\r\n\r\n\t\tfor (i = 0; i < ni; i++) {\r\n\t\t\tspring = self._springs[i];\r\n\r\n\t\t\tif (spring == null) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (!spring._frozen && spring._step) {\r\n\t\t\t\tspring._step.call();\r\n\t\t\t}\r\n\t\t}\r\n\t}, 20);\r\n};\r\n\r\n$$.Simulation.SpringSimulator.prototype = {\r\n\taddSpring: function(spring) {\r\n\t\tthis._springs.push(spring);\r\n\t},\r\n\r\n\tdeleteSpring: function(spring) {\r\n\t\tvar i = _.indexOf(this._springs, spring);\r\n\r\n\t\tif (i != -1) {\r\n\t\t\tthis._springs.splice(i, 1);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Создать один \"глобальный\" экземпляр.\r\n\r\n$$.Simulation.__springSimulator = new $$.Simulation.SpringSimulator();\r\n","$$.Simulation = $$.Simulation || {};\r\n\r\n/**\r\n * @constructor\r\n */\r\n$$.Simulation.Spring = function (options) {\r\n\toptions = _.extend({\r\n\t\tfrozen:                   false,\r\n\t\tposition:                 0,\r\n\t\tpositionLimits:           null,\r\n\t\ttarget:                   0,\r\n\t\ttargetLimits:             null,\r\n\t\tvelocity:                 0,\r\n\t\tvelocityLimit:            null,\r\n\t\trigidness:                1,\r\n\t\tdamping:                  1,\r\n\t\tforcePower:               1,\r\n\t\ttargetVelocityLimit:      null,\r\n\t\ttargetVelocityLimitPower: 1.25,\r\n\t\tstopAtTarget:             false,\r\n\t\tstep:                     null\r\n\t}, options || {});\r\n\r\n\tthis._frozen = options.frozen;\r\n\tthis._position = options.position;\r\n\tthis._positionLimits = options.positionLimits;\r\n\tthis._target = options.target;\r\n\tthis._targetLimits = options.targetLimits;\r\n\tthis._velocity = options.velocity;\r\n\tthis._velocityLimit = options.velocityLimit;\r\n\tthis._rigidness = options.rigidness;\r\n\tthis._damping = options.damping;\r\n\tthis._forcePower = options.forcePower;\r\n\tthis._targetVelocityLimit = options.targetVelocityLimit;\r\n\tthis._targetVelocityLimitPower = options.targetVelocityLimitPower;\r\n\tthis._stopAtTarget = options.stopAtTarget;\r\n\tthis._step = null;\r\n\r\n\tif (options.step) {\r\n\t\tthis.step(options.step);\r\n\t}\r\n\r\n\tthis._applyTargetLimits();\r\n\r\n\t$$.Simulation.__springSimulator.addSpring(this);\r\n};\r\n\r\n$$.Simulation.Spring.prototype = {\r\n\t_applyTargetLimits: function () {\r\n\t\tif (this._targetLimits === null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._target < this._targetLimits[ 0 ]) {\r\n\t\t\tthis._target = this._targetLimits[ 0 ];\r\n\t\t} else if (this._target > this._targetLimits[ 1 ]) {\r\n\t\t\tthis._target = this._targetLimits[ 1 ];\r\n\t\t}\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\t\tthis._step = null;\r\n\t\t$$.Simulation.__springSimulator.deleteSpring(this);\r\n\t},\r\n\r\n\tmoveTarget: function (delta) {\r\n\t\tthis._target += delta;\r\n\t\tthis._applyTargetLimits();\r\n\t},\r\n\r\n\tstep: function (callback) {\r\n\t\tthis._step = _.bind(callback, this);\r\n\t},\r\n\r\n\ttarget: function (value) {\r\n\t\tif (arguments.length == 0) {\r\n\t\t\treturn this._target;\r\n\t\t}\r\n\r\n\t\tthis._target = value;\r\n\t\tthis._applyTargetLimits();\r\n\t},\r\n\r\n\ttargetLimits: function (value) {\r\n\t\tif (arguments.length == 0) {\r\n\t\t\treturn this._targetLimits;\r\n\t\t}\r\n\r\n\t\tthis._targetLimits = value;\r\n\t\tthis._applyTargetLimits();\r\n\t}\r\n};\r\n\r\n// Создать методы-аксессоры.\r\n\r\n_.each([\r\n\t'frozen', 'position', 'positionLimits', 'velocity', 'velocityLimit'\r\n\t, 'rigidness', 'damping', 'forcePower',\r\n\t, 'targetVelocityLimit', 'targetVelocityLimitPower', 'stopAtTarget'\r\n], function (k) {\r\n\t$$.Simulation.Spring.prototype[ k ] = function (value) {\r\n\t\tif (arguments.length == 0) {\r\n\t\t\treturn this[ '_' + k ];\r\n\t\t}\r\n\r\n\t\tthis[ '_' + k ] = value;\r\n\t};\r\n});\r\n","var $$ = $$ || {};\r\n\r\n$$.extend = function (Child, Parent) {\r\n\tvar F = function () {\r\n\t};\r\n\tF.prototype = Parent.prototype;\r\n\tChild.prototype = new F();\r\n\tChild.prototype.constructor = Child;\r\n\tChild.superclass = Parent.prototype;\r\n};\r\n\r\n$$.trim = function (str, charlist) {\r\n\tcharlist = !charlist ? ' \\\\s\\xA0' : charlist.replace(/([\\[\\]\\(\\)\\.\\?\\/\\*\\{\\}\\+\\$\\^\\:])/g, '\\$1');\r\n\tvar re = new RegExp('^[' + charlist + ']+|[' + charlist + ']+$', 'g');\r\n\treturn str.replace(re, '');\r\n};\r\n\r\n$$.parseUrlParams = function (url) {\r\n\tvar url = url || location.href;\r\n\tvar searchParam = {};\r\n\tvar regExpParams = /\\?{1}.+/;\r\n\r\n\tif (regExpParams.test(url)) {\r\n\t\turl = url.replace(regExpParams, '');\r\n\r\n\t\tvar urlParams = location.search.replace('?', '');\r\n\t\turlParams = urlParams.split('&');\r\n\r\n\t\t_.each(urlParams, function (item, index, list) {\r\n\t\t\tvar param = item.split('=');\r\n\t\t\tsearchParam[ param[ 0 ] ] = param[ 1 ];\r\n\t\t});\r\n\t}\r\n\treturn searchParam;\r\n};\r\n\r\n$$.clamp = function (value, min, max) {\r\n\treturn Math.min(max, Math.max(min, value));\r\n};\r\n\r\n$$.getRandomInt = function (min, max) {\r\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n};\r\n\r\n$$.makeVideoPlayerHtml = function (videoType, videoId, width, height) {\r\n\tif (videoType == 'youtube') {\r\n\t\treturn '<iframe class=\"youtube-player\" type=\"text/html\"'\r\n\t\t\t+ ' width=\"' + width + '\" height=\"' + height + '\" src=\"'\r\n\t\t\t+ 'http://www.youtube.com/embed/' + videoId + '?autoplay=0&rel=0&amp;controls=0&amp;showinfo=0'\r\n\t\t\t+ '\" frameborder=\"0\" wmode=\"opaque\" autoplay=\"false\"></iframe>';\r\n\t} else if (videoType == 'vimeo') {\r\n\t\treturn '<iframe wmode=\"opaque\" width=\"' + width + '\" height=\"' + height + '\" src=\"'\r\n\t\t\t+ 'http://player.vimeo.com/video/' + videoId + '?autoplay=1'\r\n\t\t\t+ '\" frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';\r\n\t}\r\n\r\n\treturn '';\r\n};\r\n\r\n$$.ScrollWidth = function () {\r\n\t// создадим элемент с прокруткой\r\n\tvar div = document.createElement('div');\r\n\r\n\tdiv.style.overflowY = 'scroll';\r\n\tdiv.style.width = '50px';\r\n\tdiv.style.height = '50px';\r\n\r\n\t// при display:none размеры нельзя узнать\r\n\t// нужно, чтобы элемент был видим,\r\n\t// visibility:hidden - можно, т.к. сохраняет геометрию\r\n\tdiv.style.visibility = 'hidden';\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar scrollWidth = div.offsetWidth - div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn scrollWidth;\r\n};\r\n\r\n$$.FakerInfo = function (block) {\r\n\tvar news = block.find('.news-block');\r\n\r\n\tnews.each(function () {\r\n\t\tvar item = $(this);\r\n\t\tvar hasImage = item.find('img').length == 0 ? false : true;\r\n\t\tvar hasTitle = item.find('.title').length == 0 ? false : true;\r\n\r\n\t\tif (hasTitle) {\r\n\t\t\tvar title = item.find('.title');\r\n\t\t\tvar subtitle = item.find('.subtitle');\r\n\t\t\tvar description = item.find('.description');\r\n\t\t\tvar date = item.find('.date');\r\n\t\t\tvar rating = item.find('.rating');\r\n\r\n\t\t\tvar timeDate = new Date(faker.date.between(2010, 2014));\r\n\t\t\tvar curr_date = timeDate.getDate();\r\n\t\t\tvar curr_month = timeDate.getMonth() + 1;\r\n\t\t\tvar curr_year = timeDate.getFullYear() % 1000;\r\n\t\t\tvar formatDate = curr_date + \".\" + numb(curr_month) + \".\" + curr_year;\r\n\t\t\tvar formatTime = numb(timeDate.getHours()) + \":\" + numb(timeDate.getMinutes());\r\n\r\n\t\t\tdate.text(formatDate + ', ' + formatTime);\r\n\t\t\ttitle.text(faker.lorem.words(1)[ 0 ]);\r\n\t\t\tsubtitle.text(faker.lorem.paragraph(1));\r\n\t\t\tdescription.text(faker.lorem.paragraph(1));\r\n\t\t\trating.text($$.getRandomInt(0, 4) + '.' + $$.getRandomInt(0, 9));\r\n\t\t}\r\n\r\n\t\tif (hasImage) {\r\n\t\t\tvar width = item.width();\r\n\t\t\tvar height = item.height();\r\n\t\t\titem.find('img').attr('src', faker.image.imageUrl(width, height, 'transport'));\r\n\t\t}\r\n\t});\r\n\r\n\tfunction numb (number) {\r\n\t\tif (number < 10) {\r\n\t\t\treturn '0' + number;\r\n\t\t} else {\r\n\t\t\treturn number;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n$$.number_format = function (number, decimals, dec_point, thousands_sep) {\r\n\tnumber = (number + '').replace(/[^0-9+\\-Ee.]/g, '');\r\n\tvar n = !isFinite(+number) ? 0 : +number,\r\n\t\tprec = !isFinite(+decimals) ? 0 : Math.abs(decimals),\r\n\t\tsep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,\r\n\t\tdec = (typeof dec_point === 'undefined') ? '.' : dec_point,\r\n\t\ts = '',\r\n\t\ttoFixedFix = function (n, prec) {\r\n\t\t\tvar k = Math.pow(10, prec);\r\n\t\t\treturn '' + Math.round(n * k) / k;\r\n\t\t};\r\n\ts = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');\r\n\tif (s[ 0 ].length > 3) {\r\n\t\ts[ 0 ] = s[ 0 ].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g, sep);\r\n\t}\r\n\tif ((s[ 1 ] || '').length < prec) {\r\n\t\ts[ 1 ] = s[ 1 ] || '';\r\n\t\ts[ 1 ] += new Array(prec - s[ 1 ].length + 1).join('0');\r\n\t}\r\n\treturn s.join(dec);\r\n};\r\n\r\n$$.getVideoID = function (url) {\r\n\tvar id = '';\r\n\turl = url.replace(/(>|<)/gi, '').split(/(vi\\/|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/);\r\n\tif (url[ 2 ] !== undefined) {\r\n\t\tid = url[ 2 ].split(/[^0-9a-z_\\-]/i);\r\n\t\tid = id[ 0 ];\r\n\t} else {\r\n\t\tid = url;\r\n\t}\r\n\treturn id;\r\n};\r\n\r\n$$.secondsToTime = function (seconds) {\r\n\t\"use strict\";\r\n\r\n\tlet allTime = seconds;\r\n\tlet minutes = parseInt(seconds / 60);\r\n\tlet sec = parseInt(seconds - (minutes * 60));\r\n\r\n\tif (minutes < 10) {\r\n\t\tminutes = `0${minutes}`\r\n\t}\r\n\r\n\tif (sec < 10) {\r\n\t\tsec = `0${sec}`\r\n\t}\r\n\r\n\treturn {\r\n\t\tminutes: minutes,\r\n\t\tsec:     sec\r\n\t};\r\n};\r\n","var $$ = $$ || {};\r\n\r\n$$.Component = class Component extends $$.Emitter {\r\n\tconstructor (root, options) {\r\n\t\tsuper();\r\n\r\n\t\tthis.root = root;\r\n\t\tthis.options = _.merge(this._defaultOptions, options);\r\n\r\n\t\tthis.initialize();\r\n\t}\r\n\r\n\tinitialize () {\r\n\t\tthis._cacheNodes();\r\n\t\tthis._bindEvents();\r\n\t\tthis._ready();\r\n\t}\r\n\r\n\t_cacheNodes () {\r\n\t}\r\n\r\n\t_bindEvents () {\r\n\t}\r\n\r\n\t_ready () {\r\n\r\n\t}\r\n};\r\n","var $$ = $$ || {};\r\n\r\nclass Application {\r\n\tconstructor () {\r\n\t\t\"use strict\";\r\n\r\n\t\tthis._initFunction();\r\n\t}\r\n\r\n\t_initFunction () {\r\n\t\t\"use strict\";\r\n\r\n\t\tconsole.log('Init Function');\r\n\t}\r\n}\r\n\r\n$(function () {\r\n\t$$.window = $(window);\r\n\t$$.body = $(document.body);\r\n\t$$.windowWidth = $$.window.width();\r\n\t$$.windowHeight = $$.window.height();\r\n\r\n\t$$.application = new Application();\r\n\r\n\t$$.ESCAPE_KEY_CODE = 27;\r\n\r\n\t$$.window.on('resize', function () {\r\n\t\t$$.windowWidth = $$.window.width();\r\n\t\t$$.windowHeight = $$.window.height();\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}